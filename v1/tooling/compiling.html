

<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><title>Compiler — Kingly.js</title>
  <meta charset="utf-8">
  <meta name="description" content="Kingly - The Modelling Library for Portable UIs">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Compiler — Kingly.js">
  <meta property="og:description" content="Kingly - The Modelling Library for Portable UIs">
  <meta property="og:image" content="https://brucou.github.io/documentation//documentation/images/kingly_logo.png">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Compiler — Kingly.js">
  <meta name="twitter:description" content="Kingly - The Modelling Library for Portable UIs">
  <meta name="twitter:image" content="https://brucou.github.io/documentation/images/kingly_logo.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/documentation/images/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/documentation/images/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/documentation/images/icons/favicon-256x256.png">
  <link rel="icon" href="/documentation/images/kingly_logo.png" type="image/png">

  <link href="//fonts.googleapis.com/css?family=Lato:300,400,600" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Overlock:400&text=Kingly.js" rel="stylesheet" type="text/css">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- main page styles -->
  <link rel="stylesheet" href="/documentation/css/page.css">

  <!--<script src="/documentation/js/kingly.js"></script>-->

  <!-- ga -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-141924019-1', 'brucou.github.io/documentation');
    ga('send', 'pageview');
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </head>

  <body class="docs">    <div id="mobile-bar">
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><a class="menu-button"></a>
      <a class="logo" href="/documentation"></a>
    </div>
    

<div id="header">
  <a id="logo" href="/documentation/">
    <img src="/documentation/images/kingly_logo.png" alt="library logo">
    <span>Kingly</span>
    
  </a>
  <ul id="nav">
    <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/concepts/" class="nav-link">Concepts</a></li>
        <li><a href="/documentation/v1/tutorials/" class="nav-link">Tutorials</a></li>
        <li><a href="/documentation/v1/examples/" class="nav-link">Examples</a></li>
        <li><a href="/documentation/v1/cookbook/" class="nav-link">Cookbook</a></li>
        <li><a href="/documentation/v1/best-practices/" class="nav-link">Best practices</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/api/index.html" class="nav-link team">API</a>
</li>
<li class="nav-dropdown-container tooling">
  <a class="nav-link current">Tooling</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tooling/tools_overview.html" class="nav-link">Overview</a></li>
        <li><a href="/documentation/v1/tooling/graph_editing.html" class="nav-link">Graph editing</a></li>
        <li><a href="/documentation/v1/tooling/compiling.html" class="nav-link current">Compiling</a></li>
        <li><a href="/documentation/v1/tooling/devtool.html" class="nav-link">Devtool</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container integrations">
  <a class="nav-link">Integrations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/int-vanilla/" class="nav-link">Vanilla js</a></li>
        <li><a href="/documentation/v1/int-react/" class="nav-link">React</a></li>
        <li><a href="/documentation/v1/int-vue/" class="nav-link">Vue</a></li>
        <li><a href="/documentation/v1/int-svelte/" class="nav-link">Svelte</a></li>
        <li><a href="/documentation/v1/int-others/" class="nav-link">Others</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/testing/index.html" class="nav-link team">Testing</a>
</li>
<li>
  <a href="/documentation/v1/contributed/index.html" class="nav-link team">Contributed</a>
</li>

  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/concepts/" class="nav-link">Concepts</a></li>
        <li><a href="/documentation/v1/tutorials/" class="nav-link">Tutorials</a></li>
        <li><a href="/documentation/v1/examples/" class="nav-link">Examples</a></li>
        <li><a href="/documentation/v1/cookbook/" class="nav-link">Cookbook</a></li>
        <li><a href="/documentation/v1/best-practices/" class="nav-link">Best practices</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/api/index.html" class="nav-link team">API</a>
</li>
<li class="nav-dropdown-container tooling">
  <a class="nav-link current">Tooling</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tooling/tools_overview.html" class="nav-link">Overview</a></li>
        <li><a href="/documentation/v1/tooling/graph_editing.html" class="nav-link">Graph editing</a></li>
        <li><a href="/documentation/v1/tooling/compiling.html" class="nav-link current">Compiling</a></li>
        <li><a href="/documentation/v1/tooling/devtool.html" class="nav-link">Devtool</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container integrations">
  <a class="nav-link">Integrations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/int-vanilla/" class="nav-link">Vanilla js</a></li>
        <li><a href="/documentation/v1/int-react/" class="nav-link">React</a></li>
        <li><a href="/documentation/v1/int-vue/" class="nav-link">Vue</a></li>
        <li><a href="/documentation/v1/int-svelte/" class="nav-link">Svelte</a></li>
        <li><a href="/documentation/v1/int-others/" class="nav-link">Others</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/testing/index.html" class="nav-link team">Testing</a>
</li>
<li>
  <a href="/documentation/v1/contributed/index.html" class="nav-link team">Contributed</a>
</li>

    </ul>
    <div class="list">
      
        <h2>
          
          
          
            <select class="version-select">
              <option value="SELF" selected>1.0</option>
            </select>
          
        </h2>
        <ul class="menu-root">
  
    
    
    
      
      
    
    <li>
      <a href="/documentation/v1/tooling/tools_overview.html" class="sidebar-link">Overview</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/documentation/v1/tooling/graph_editing.html" class="sidebar-link">Graph editor</a>
    </li>
  
    
    
    
      
      
    
    <li>
      <a href="/documentation/v1/tooling/yed_kingly_integration.html" class="sidebar-link">Integration with Kingly</a>
    </li>
  
    
    
    
      
      
      
    
    <li>
      <a href="/documentation/v1/tooling/compiling.html" class="sidebar-link current new">Compiler</a>
    </li>
  
    
    
    
      
      
    
    <li>
      <a href="/documentation/v1/tooling/devtool.html" class="sidebar-link new">Dev tool</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>



<div class="content tooling with-sidebar ">
  
    
    
  
  
    <h1>Compiler</h1>
  
  
    <p>The <code>slim</code> command supports the creation of state machines that are optimized for production. The Kingly state machine library may end up contributing between 5 and 12 KB of your production bundles. The <code>slim</code> compiler allows you to reduce further the footprint of your state machines by compiling away the Kingly library. Real-life, large machines compile to ~2 KB size. Additionally, the compiled code is plain, zero-dependency JavaScript that will work in older browsers (IE &gt; 8).</p>
<p>The <code>slim</code> compiling command is designed to work with and complement the <a href="https://www.yworks.com/products/yed-live" target="_blank" rel="noopener">yed graph editor</a>. You may find more information on yEd in the <em>Graph editor</em> section of this documentation.</p>
<p><code>slim</code> takes a <code>.grapml</code> yEd file as input and outputs JavaScript files that define and export a state machine factory function. Developers can then import the machine factory function in their program and create a Kingly state machine by calling the factory with the required parameters.</p>
<p>You are invited to review the <a href="https://brucou.github.io/documentation/v1/tutorials/password-meter-compiling.html"><em>Password meter</em> tutorial</a> for a guided example of turning a machine drawing into a JavaScript function with <code>slim</code>.</p>
<h2 id="From-a-drawing-to-a-JavaScript-function"><a href="#From-a-drawing-to-a-JavaScript-function" class="headerlink" title="From a drawing to a JavaScript function"></a>From a drawing to a JavaScript function</h2><p>A Kingly state machine computes outputs as a result of being passed an input — we will often say that the machine processes or receives an event. The high-level specifications of the machine computation can be represented with a graph. Nodes in the graph correspond to control states of the machine. Edges connecting two nodes represent transitions between control states of the machine.</p>
<p>We said specifications because the drawing let us know how the machine will compute in response to an input depending on the state it is in. We said high-level specifications because the drawing does not allow the actual computing of a machine response — it is a drawing. Let’s look at a <a href="https://brucou.github.io/documentation/v1/tutorials/counter-application.html">simple such drawing from the tutorials</a>:</p>
<p><img src="https://brucou.github.io/documentation/graphs/trivial%20counter%20machine.png" alt="simple machine"></p>
<p>This <strong>machine drawing</strong> tells us that when processing a <em>click</em> input, the modeled <strong>JavaScript machine</strong> should trigger the incrementing of a counter, and some rendering. It does not tell us how exactly that works. To turn the drawing into an actual JavaScript function, you need to provide the missing JavaScript objects: </p>
<ul>
<li>implementation of <em>increment counter</em>; and</li>
<li>implementation of <em>render</em>.</li>
</ul>
<p>The <code>.graphml</code> file contains the following pieces of information:</p>
<ul>
<li>the inputs (events) that are accepted by the machine;</li>
<li>the machine’s initial control state;</li>
<li>the control states of the machine;</li>
<li>the hierarchy of the machine; and</li>
<li>the machine’s transitions.</li>
</ul>
<p>The <code>slim</code> CLI extracts the pieces of information contained in the <code>.graphml</code> file that it receives as a parameter and produces two almost identical JavaScript files. One is destined to be used in a browser context (<code>.js</code> file), the other in a Node.js context (<code>.cjs</code> file that can be <code>require</code>d but not <code>import</code>ed).</p>
<p>The produced JavaScript files import/require the Kingly library, and export a machine factory that can be used by other modules to construct the actual JavaScript machine we seek. The machine factory must be passed the following pieces of information that are missing from the graph:</p>
<ul>
<li>the machine’s initial extended state;</li>
<li>the implementation for the machine guards, if any — we only have their names;</li>
<li>the implementation for the machine actions, if any — we only have their names;</li>
<li>the implementation of how the machine updates its internal state (<code>updateState</code> parameter); and</li>
<li>the machine’s optional configuration — e.g., debugging, tracing, dependency injection.</li>
</ul>
<p>You are invited to review the <a href="https://brucou.github.io/documentation/v1/tutorials/password-meter-using-graph-editor.html"><em>Password meter</em> tutorial</a> for a guided example of turning a machine drawing into a JavaScript machine with <code>yed2kingly</code>.</p>
<h2 id="How-does-it-work"><a href="#How-does-it-work" class="headerlink" title="How does it work?"></a>How does it work?</h2><p>In a typical process, you draw a machine with the yEd editor. When done or ready to test, you save the file in the default <code>.graphml</code> format in the same directory in which you want to use the target state machine. You run the <code>slim</code> command on the newly saved file. That generates the compiled JavaScript file which exports a machine factory function. The factory is passed parameters to create a Kingly state machine.</p>
<h2 id="Get-started"><a href="#Get-started" class="headerlink" title="Get started"></a>Get started</h2><p>If you haven’t yet installed the <code>yEd</code> editor, please do so by following the instructions <a href="https://brucou.github.io/documentation/v1/tooling/graph_editing.html">here</a>.</p>
<p>To use  <code>slim</code>  in the shell terminal, you will need to install the package globally:</p>
<pre><code class="hljs bash">npm install -g slim</code></pre>
<h2 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h2><pre><code class="hljs bash">slim filename.graphml</code></pre>
<p>Running the converter produces two files, targeted at consumption in a browser and Node.js environment. Assuming the file <code>src/graphs/file.graphml</code> is passed to <code>slim</code>, the following two files are created: <code>src/graphs/file.graphml.fsm.compiled.js</code>, and <code>src/graphs/file.graphml.fsm.compiled.cjs</code>.</p>
<h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><p>The following machine graph:</p>
<p><img src="https://imgur.com/SWWMdGb.png" alt="top-level-init test graph"></p>
<p>when compiled with <code>slim</code> leads to the following JavaScript file:</p>
<pre><code class="hljs js"><span class="hljs-comment">// Generated automatically by Kingly, version 0.29</span>
<span class="hljs-comment">// http://github.com/brucou/Kingly</span>
<span class="hljs-comment">// Copy-paste help</span>
<span class="hljs-comment">// For debugging purposes, guards and actions functions should all have a name</span>
<span class="hljs-comment">// Using natural language sentences for labels in the graph is valid</span>
<span class="hljs-comment">// guard and action functions name still follow JavaScript rules though</span>
<span class="hljs-comment">// -----Guards------</span>
<span class="hljs-comment">/**
 * @param &#123;E&#125; extendedState
 * @param &#123;D&#125; eventData
 * @param &#123;X&#125; settings
 * @returns Boolean
 */</span>
<span class="hljs-comment">// const guards = &#123;</span>
<span class="hljs-comment">//   "isNumber": function (extendedState, eventData, settings)&#123;&#125;,</span>
<span class="hljs-comment">//   "not(isNumber)": function (extendedState, eventData, settings)&#123;&#125;,</span>
<span class="hljs-comment">// &#125;;</span>
<span class="hljs-comment">// -----Actions------</span>
<span class="hljs-comment">/**
 * @param &#123;E&#125; extendedState
 * @param &#123;D&#125; eventData
 * @param &#123;X&#125; settings
 * @returns &#123;&#123;updates: U[], outputs: O[]&#125;&#125;
 * (such that updateState:: E -&gt; U[] -&gt; E)
 */</span>
<span class="hljs-comment">// const actions = &#123;</span>
<span class="hljs-comment">//   "logNumber": function (extendedState, eventData, settings)&#123;&#125;,</span>
<span class="hljs-comment">//   "logOther": function (extendedState, eventData, settings)&#123;&#125;,</span>
<span class="hljs-comment">// &#125;;</span>
<span class="hljs-comment">// -------Control states---------</span>
<span class="hljs-comment">/*
      &#123;"0":"nok","1":"Numberღn0","2":"Otherღn2","3":"Doneღn3"&#125;
      */</span>
<span class="hljs-comment">// ------------------------------</span>

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createStateMachine</span>(<span class="hljs-params">fsmDefForCompile, stg</span>) </span>&#123;
  <span class="hljs-keyword">var</span> actions = fsmDefForCompile.actionFactories;
  <span class="hljs-keyword">var</span> guards = fsmDefForCompile.guards;
  <span class="hljs-keyword">var</span> updateState = fsmDefForCompile.updateState;
  <span class="hljs-keyword">var</span> initialExtendedState = fsmDefForCompile.initialExtendedState;

  <span class="hljs-comment">// Initialize machine state,</span>
  <span class="hljs-comment">// Start with pre-initial state "nok"</span>
  <span class="hljs-keyword">var</span> cs = <span class="hljs-number">0</span>;
  <span class="hljs-keyword">var</span> es = initialExtendedState;

  <span class="hljs-keyword">var</span> eventHandlers = [
    ...
  ];

  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">process</span>(<span class="hljs-params">event</span>) </span>&#123;
    ...
  &#125;

  <span class="hljs-comment">// Start the machine</span>
  process(&#123; [<span class="hljs-string">"init"</span>]: initialExtendedState &#125;);

  <span class="hljs-keyword">return</span> process;
&#125;

<span class="hljs-keyword">export</span> &#123; createStateMachine &#125;;</code></pre>
<p>Let’s illustrate the parameters received by the <code>createStateMachine</code> factory function:</p>
<pre><code class="hljs js"><span class="hljs-comment">// require the js file</span>
<span class="hljs-keyword">const</span> &#123; createStateMachine &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;graphMlFile&#125;</span>.fsm.compiled.cjs`</span>);

<span class="hljs-comment">// Build the machine</span>
<span class="hljs-keyword">const</span> guards = &#123;
  <span class="hljs-string">'not(isNumber)'</span>: <span class="hljs-function">(<span class="hljs-params">s, e, stg</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> s.n !== <span class="hljs-string">'number'</span>,
  <span class="hljs-attr">isNumber</span>: <span class="hljs-function">(<span class="hljs-params">s, e, stg</span>) =&gt;</span> <span class="hljs-keyword">typeof</span> s.n === <span class="hljs-string">'number'</span>,
&#125;;
<span class="hljs-keyword">const</span> actionFactories = &#123;
  <span class="hljs-attr">logOther</span>: <span class="hljs-function">(<span class="hljs-params">s, e, stg</span>) =&gt;</span> (&#123; <span class="hljs-attr">outputs</span>: [<span class="hljs-string">`logOther run on <span class="hljs-subst">$&#123;s.n&#125;</span>`</span>], <span class="hljs-attr">updates</span>: &#123;&#125; &#125;),
  <span class="hljs-attr">logNumber</span>: <span class="hljs-function">(<span class="hljs-params">s, e, stg</span>) =&gt;</span> (&#123; <span class="hljs-attr">outputs</span>: [<span class="hljs-string">`logNumber run on <span class="hljs-subst">$&#123;s.n&#125;</span>`</span>], <span class="hljs-attr">updates</span>: &#123;&#125; &#125;),
&#125;;
<span class="hljs-keyword">const</span> fsm1 = createStateMachine(&#123;
  <span class="hljs-attr">initialExtendedState</span>: &#123; <span class="hljs-attr">n</span>: <span class="hljs-number">0</span> &#125;,
  actionFactories,
  guards,
  updateState,
&#125;, settings);</code></pre>
<p>As the example illustrates, the factory function’s first parameter consists of four objects: </p>
<ul>
<li>the initial extended state of the machine; </li>
<li>the mapping between the action factories name and their JavaScript implementation;</li>
<li>the mapping between the guards name and their JavaScript implementation; and</li>
<li>a reducer function <code>updateState</code> whose parameters are a state value and an array of state updates operations. The reducer function return an updated state value. </li>
</ul>
<p>Note that the compiled machine does not offer error messages, protection against malformed inputs, devtool support, or logging functionality. This is only possible when using the Kingly library — and its extra kilobytes.</p>
<p>Note also that, as much as possible, <code>slim</code> refrains from using advanced JavaScript language features in the generated code to be compatible with older browsers without polyfilling or babel-parsing. This, however, has not been thoroughly tested so far.</p>
<p>You will find additional examples in the <a href="https://github.com/brucou/slim/tree/master/tests" target="_blank" rel="noopener"><code>/tests</code> directory</a> of the <code>slim</code> Github repository.</p>
<h2 id="Tips"><a href="#Tips" class="headerlink" title="Tips"></a>Tips</h2><ul>
<li>You can have a file watcher in development that automatically runs <code>slim</code> when a <code>.graphml</code> file changes. The script will thus run every time you save the graph that you are working on.</li>
<li>the produced files include commented pieces of code that you can copy paste to speed up your implementation and reduce the possibility of errors. For instance, in the previous example, you need to provide a map of action names to action factories. You can copy-paste, uncomment, and complete the following commented code:<pre><code class="hljs js"><span class="hljs-comment">// const actions = &#123;</span>
<span class="hljs-comment">//   "logNumber": function (extendedState, eventData, settings)&#123;&#125;,</span>
<span class="hljs-comment">//   "logOther": function (extendedState, eventData, settings)&#123;&#125;,</span>
<span class="hljs-comment">// &#125;;</span></code></pre>
</li>
</ul>
<h2 id="Size-of-the-generated-file"><a href="#Size-of-the-generated-file" class="headerlink" title="Size of the generated file"></a>Size of the generated file</h2><p>This section contains rather technical considerations that do not impact your usage of Kingly or its tooling. Feel free to skip if you have more pressing matters to consider.</p>
<p>Assuming the machine has no isolated states (i.e. states which are not reached by any transitions), the size of the compiled file roughly follows the shape <code>a + b x Number of transitions</code>, i.e. is mostly proportional to the number of transitions of the graph. The proportional coefficient <code>b</code> seems to be fairly low and the compression factor increases with the size of the machine. In short, you need to write a really large graph to get to 5Kb just for the machine.</p>
<label for="mn-demo-5" class="margin-toggle">⊕</label><input type="checkbox" id="mn-demo-5" class="margin-toggle"><span class="marginnote"><p>Minification is performed online with the <a href="https://javascript-minifier.com/" target="_blank" rel="noopener">javascript-minifier</a> tool. Lines of code are counted with an <a href="https://codetabs.com/count-loc/count-loc-online.html" target="_blank" rel="noopener">online tool</a>. </p>
</span>
<p>We give a few data points: </p>
<div class="table-container">
<table>
<thead>
<tr>
<th>Machine graph</th>
<th>Machine graph size</th>
<th>Compiled machine size</th>
</tr>
</thead>
<tbody>
<tr>
<td><img src="https://imgur.com/mk9hM6u.png" alt="counter machine graph"></td>
<td>1 control state, 1 transition</td>
<td>~50 loc, 0.5 KB</td>
</tr>
<tr>
<td><img src="https://brucou.github.io/documentation/graphs/password-meter.png" alt="[password meter modelization]"></td>
<td>4 control state, 5 transitions</td>
<td>~80 loc, 0.6 KB</td>
</tr>
<tr>
<td><a href="https://rw-kingly-svelte.bricoi1.now.sh/#/" target="_blank" rel="noopener"><img src="https://brucou.github.io/documentation/graphs/real-world/realworld-routing-article.png" alt="Conduit average-sized application"></a></td>
<td>~35 control states, 75 transitions</td>
<td>~2.3 KB</td>
</tr>
</tbody>
</table>
</div>
<p>We estimate that writing logic by hand for average-size machines may shave 100 (extra code due to the compiler) + 400 bytes (extra code due to using a graph editor) for a total of 0.5 KB.</p>
<label for="mn-demo-14" class="margin-toggle">⊕</label><input type="checkbox" id="mn-demo-14" class="margin-toggle"><span class="marginnote"><p>Note that this size does not (and cannot) include the actions and guards but does represent the size of the logic encoded in the machine.</p>
</span>
<p>Those preliminary results are fairly consistent. Assuming 20 bytes per transitions (computed from the previous data points), with a baseline of 500 bytes, to reach 5 KB (i.e. the size of the core Kingly library) we need a machine with over 200 transitions!! </p>
<p>In summary, with the <code>slim</code> compiler, <strong>Kingly proposes state machines as a near-zero-cost abstraction</strong>. This means that if you would have written that logic by hand, you would not have been able to achieve a significantly improved min.gzipped size.</p>
<h2 id="Troubleshooting"><a href="#Troubleshooting" class="headerlink" title="Troubleshooting"></a>Troubleshooting</h2><p>The script will exit with an error code whenever:</p>
<ul>
<li>there are syntax errors in the yEd graph (e.g., forbidden or ambiguous edge label syntax). You may want to review the <a href="http://localhost:4000/documentation/v1/tooling/graph_editing.html#Syntax-reference" target="_blank" rel="noopener">detailed syntax reference</a>. You can paste the <a href="https://github.com/brucou/slim/blob/master/yedEdgeLabelGrammar.ne" target="_blank" rel="noopener">grammar</a> in the <a href="https://omrelli.ug/nearley-playground/" target="_blank" rel="noopener">Nearley parser playground</a> and check your syntax.</li>
<li>there are semantic errors in the yEd graph. That means that your drawing is legit, but it does not map to a valid Kingly machine. This may happen when you break Kingly contracts, for instance, if you have two initial control states for the same compound state. You may want to review <a href="http://localhost:4000/documentation/v1/api/index.html#Contracts" target="_blank" rel="noopener">Kingly contracts</a>.</li>
<li>the script cannot parse the file. You may want to check that you wrote the filename correctly, that the file exists at the expected location, and that the file is a valid <code>.graphml</code> file by opening it in yEd.</li>
<li>there is a bug! In that case, please <a href="https://github.com/brucou/kingly/issues" target="_blank" rel="noopener">open an issue on Github</a>.</li>
</ul>
<h2 id="Known-limitations"><a href="#Known-limitations" class="headerlink" title="Known limitations"></a>Known limitations</h2><p>The <code>.graphml</code> format for yEd is not publicly documented. The specifications for the format have not changed in many years. However, our parser may still have holes or break if the format specifications change. It is thus important that you log issues if you encounter any errors while running the compiler. </p>
<h2 id="Feedback-welcome"><a href="#Feedback-welcome" class="headerlink" title="Feedback welcome!"></a>Feedback welcome!</h2><p>Kingly tooling exist to address pain points from real use cases, and drive your productivity up. Your feedback is welcome and may result in the improvement or extension of the existing set of tools. If there is anything you feel should be addressed and is not, or should be addressed differently, get in touch by <a href="https://github.com/brucou/kingly/issues" target="_blank" rel="noopener">opening an issue on Github</a>.</p>

  
  
  <div class="footer">
    Caught a mistake?
    <a href="https://github.com/brucou/documentation/tree/master/v1/tooling/compiling.html" rel="noopener" target="_blank">
      Edit this on GitHub!
    </a>
    <a id="follow-button" class="btn" title="Kingly Github" href="https://github.com/brucou/kingly">
      <img class="github" src="/documentation/images/GitHub-Mark-32px.png" alt="github">
    </a>
  </div>
</div>

      </div>
      <script src="/documentation/js/smooth-scroll.min.js"></script>
    

    <!-- script for sidebars, version selects etc. -->
    <script src="/documentation/js/css.escape.js"></script>
    <script src="/documentation/js/common.js"></script>
    <!-- mathjax-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
