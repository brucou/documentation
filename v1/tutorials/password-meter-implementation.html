

<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><title>Machine implementation — Kingly.js</title>
  <meta charset="utf-8">
  <meta name="description" content="Kingly - The Modelling Library for Portable UIs">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Machine implementation — Kingly.js">
  <meta property="og:description" content="Kingly - The Modelling Library for Portable UIs">
  <meta property="og:image" content="https://brucou.github.io/documentation//documentation/images/kingly_logo.png">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Machine implementation — Kingly.js">
  <meta name="twitter:description" content="Kingly - The Modelling Library for Portable UIs">
  <meta name="twitter:image" content="https://brucou.github.io/documentation/images/kingly_logo.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/documentation/images/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/documentation/images/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/documentation/images/icons/favicon-256x256.png">
  <link rel="icon" href="/documentation/images/kingly_logo.png" type="image/png">

  <link href="//fonts.googleapis.com/css?family=Lato:300,400,600" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Overlock:400&text=Kingly.js" rel="stylesheet" type="text/css">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- main page styles -->
  <link rel="stylesheet" href="/documentation/css/page.css">

  <!--<script src="/documentation/js/kingly.js"></script>-->

  <!-- ga -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-141924019-1', 'brucou.github.io/documentation');
    ga('send', 'pageview');
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </head>

  <body class="docs">    <div id="mobile-bar">
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><a class="menu-button"></a>
      <a class="logo" href="/documentation"></a>
    </div>
    

<div id="header">
  <a id="logo" href="/documentation/">
    <img src="/documentation/images/kingly_logo.png" alt="library logo">
    <span>Kingly</span>
    
  </a>
  <ul id="nav">
    <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tutorials/" class="nav-link current">Tutorials</a></li>
        <li><a href="/documentation/v1/examples/" class="nav-link">Examples</a></li>
        <li><a href="/documentation/v1/cookbook/" class="nav-link">Cookbook</a></li>
        <li><a href="/documentation/v1/best-practices/" class="nav-link">Best practices</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/api/index.html" class="nav-link team">API</a>
</li>
<li class="nav-dropdown-container tooling">
  <a class="nav-link">Tooling</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tooling/graph_editing.html" class="nav-link">Graph editing</a></li>
        <li><a href="/documentation/v1/tooling/compiling.html" class="nav-link">Compiling</a></li>
        <li><a href="/documentation/v1/tooling/devtool.html" class="nav-link">Devtool</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container integrations">
  <a class="nav-link">Integrations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/int-vanilla/" class="nav-link">Vanilla js</a></li>
        <li><a href="/documentation/v1/int-react/" class="nav-link">React</a></li>
        <li><a href="/documentation/v1/int-vue/" class="nav-link">Vue</a></li>
        <li><a href="/documentation/v1/int-svelte/" class="nav-link">Svelte</a></li>
        <li><a href="/documentation/v1/int-others/" class="nav-link">Others</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/testing/index.html" class="nav-link team">Testing</a>
</li>
<li>
  <a href="/documentation/v1/contributed/index.html" class="nav-link team">Contributed</a>
</li>

  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tutorials/" class="nav-link current">Tutorials</a></li>
        <li><a href="/documentation/v1/examples/" class="nav-link">Examples</a></li>
        <li><a href="/documentation/v1/cookbook/" class="nav-link">Cookbook</a></li>
        <li><a href="/documentation/v1/best-practices/" class="nav-link">Best practices</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/api/index.html" class="nav-link team">API</a>
</li>
<li class="nav-dropdown-container tooling">
  <a class="nav-link">Tooling</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tooling/graph_editing.html" class="nav-link">Graph editing</a></li>
        <li><a href="/documentation/v1/tooling/compiling.html" class="nav-link">Compiling</a></li>
        <li><a href="/documentation/v1/tooling/devtool.html" class="nav-link">Devtool</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container integrations">
  <a class="nav-link">Integrations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/int-vanilla/" class="nav-link">Vanilla js</a></li>
        <li><a href="/documentation/v1/int-react/" class="nav-link">React</a></li>
        <li><a href="/documentation/v1/int-vue/" class="nav-link">Vue</a></li>
        <li><a href="/documentation/v1/int-svelte/" class="nav-link">Svelte</a></li>
        <li><a href="/documentation/v1/int-others/" class="nav-link">Others</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/testing/index.html" class="nav-link team">Testing</a>
</li>
<li>
  <a href="/documentation/v1/contributed/index.html" class="nav-link team">Contributed</a>
</li>

    </ul>
    <div class="list">
      
        <h2>
          
          Tutorials
          
            <select class="version-select">
              <option value="SELF" selected>1.0</option>
            </select>
          
        </h2>
        <ul class="menu-root">
  
    
    
      
        <li><h3>Introduction</h3></li>
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/index.html" class="sidebar-link">Why Kingly</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/counter-application.html" class="sidebar-link">Counter application</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/installation.html" class="sidebar-link">Installation</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/model-with-machines.html" class="sidebar-link">Implementing UIs with state machines</a>
    </li>
  
    
    
      
      
        <li><h3>Password meter</h3></li>
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/password-meter.html" class="sidebar-link">Modelization</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/password-meter-implementation.html" class="sidebar-link current">Machine implementation</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/password-meter-ui-implementation.html" class="sidebar-link">Interface implementation</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/password-meter-using-graph-editor.html" class="sidebar-link new">Implementation with the yEd graph editor</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/password-meter-compiling.html" class="sidebar-link new">Compiling the machine</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/password-meter-learnt.html" class="sidebar-link">What we learned</a>
    </li>
  
    
    
      
      
      
        <li><h3>Chess game</h3></li>
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/chess-game.html" class="sidebar-link">Two-player chess game</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/chess-game-evolved.html" class="sidebar-link">Chess game - adding features</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/chess-game-ultimate.html" class="sidebar-link">Chess game - more features</a>
    </li>
  
    
    
      
      
      
      
      
        <li><h3 class="new">RealWorld clone</h3></li>
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world.html" class="sidebar-link">RealWorld app</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-home.html" class="sidebar-link">Home route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-sign-up.html" class="sidebar-link">Sign-up route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-sign-in.html" class="sidebar-link">Sign-in route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-editor.html" class="sidebar-link">Editor route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-settings.html" class="sidebar-link">Settings route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-profile.html" class="sidebar-link">User profile route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-article.html" class="sidebar-link">Article route</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-refactoring.html" class="sidebar-link">Refactoring</a>
    </li>
  
    
    
      
      
      
      
      
    
    
    <li>
      <a href="/documentation/v1/tutorials/real-world-lessons-learnt.html" class="sidebar-link">Lessons learnt</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>



<div class="content tutorials with-sidebar ">
  
    
    
  
  
    <h1>Machine implementation</h1>
  
  
    <p>The password meter machine will be implemented with Kingly’s <code>createStateMachine</code> factory. <code>createStateMachine</code> takes a machine definition and returns a function <code>pwdFsm</code> which accepts the specified machine inputs and outputs the commands to perform on the interfaced systems:</p>
<pre><code class="hljs undefined">pwdFsm(typed &apos;a&apos;) = display ...
pwdFsm(typed &apos;2&apos;) = display ...
pwdFsm(clicked submit) = submit `a2` password</code></pre>
<p>The machine definition (passed as a first argument of the Kingly’s machine factory) is mostly a translation of the previous graph into a data structure, together with the list of events accepted by the machine and the initial state of the machine:</p>
<label for="mn-demo-9" class="margin-toggle">⊕</label><input type="checkbox" id="mn-demo-9" class="margin-toggle"><span class="marginnote"><p>Note that we defined in our implementation the content of the password field as event data for the <code>TYPED_CHAR</code> event instead of just the new character keyed in. This is a better choice as it accounts for keys that are not associated with visible characters, such as backspace.</p>
</span> 
<pre><code class="hljs js"><span class="hljs-comment">// The simplest update function possible :-)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateState</span>(<span class="hljs-params">extendedState, extendedStateUpdates</span>) </span>&#123;
  <span class="hljs-keyword">return</span> extendedStateUpdates.slice(<span class="hljs-number">-1</span>)[<span class="hljs-number">0</span>];
&#125;

<span class="hljs-keyword">const</span> initialExtendedState = &#123;
  <span class="hljs-attr">input</span>: <span class="hljs-string">""</span>
&#125;;
<span class="hljs-keyword">const</span> states = &#123;
  [INIT]: <span class="hljs-string">""</span>,
  [STRONG]: <span class="hljs-string">""</span>,
  [WEAK]: <span class="hljs-string">""</span>,
  [DONE]: <span class="hljs-string">""</span>
&#125;;
<span class="hljs-keyword">const</span> initialControlState = INIT;
<span class="hljs-keyword">const</span> events = [TYPED_CHAR, CLICKED_SUBMIT, START];
<span class="hljs-keyword">const</span> transitions = [
  &#123; <span class="hljs-attr">from</span>: INIT, <span class="hljs-attr">event</span>: START, <span class="hljs-attr">to</span>: WEAK, <span class="hljs-attr">action</span>: displayInitScreen &#125;,
  &#123; <span class="hljs-attr">from</span>: WEAK, <span class="hljs-attr">event</span>: CLICKED_SUBMIT, <span class="hljs-attr">to</span>: WEAK, <span class="hljs-attr">action</span>: NO_ACTIONS &#125;,
  &#123;
    <span class="hljs-attr">from</span>: WEAK,
    <span class="hljs-attr">event</span>: TYPED_CHAR,
    <span class="hljs-attr">guards</span>: [
      &#123; <span class="hljs-attr">predicate</span>: isPasswordWeak, <span class="hljs-attr">to</span>: WEAK, <span class="hljs-attr">action</span>: displayWeakScreen &#125;,
      &#123; <span class="hljs-attr">predicate</span>: isPasswordStrong, <span class="hljs-attr">to</span>: STRONG, <span class="hljs-attr">action</span>: displayStrongScreen &#125;
    ]
  &#125;,
  &#123;
    <span class="hljs-attr">from</span>: STRONG,
    <span class="hljs-attr">event</span>: TYPED_CHAR,
    <span class="hljs-attr">guards</span>: [
      &#123; <span class="hljs-attr">predicate</span>: isPasswordWeak, <span class="hljs-attr">to</span>: WEAK, <span class="hljs-attr">action</span>: displayWeakScreen &#125;,
      &#123; <span class="hljs-attr">predicate</span>: isPasswordStrong, <span class="hljs-attr">to</span>: STRONG, <span class="hljs-attr">action</span>: displayStrongScreen &#125;
    ]
  &#125;,
  &#123;
    <span class="hljs-attr">from</span>: STRONG,
    <span class="hljs-attr">event</span>: CLICKED_SUBMIT,
    <span class="hljs-attr">to</span>: DONE,
    <span class="hljs-attr">action</span>: displaySubmittedPassword
  &#125;
];

<span class="hljs-keyword">const</span> pwdFsmDef = &#123;
  initialControlState,
  initialExtendedState,
  states,
  events,
  transitions,
  updateState
&#125;;

<span class="hljs-keyword">const</span> pwdFsm = createStateMachine(pwdFsmDef);</code></pre>
<div class="tip"><p>Kingly allows you to pick your favorite representation and manipulation of state by configuring the property <em>updateState</em>. All extended state updates for the machine will be run through the <em>updateState</em> function. In this simple example, we use simple cloning. You may use any reducer you fancy. I have used in the past <a href="http://jsonpatch.com/" target="_blank" rel="noopener">JSON patch</a>, <code>Immer</code>  and <code>Object.assign</code> but whatever function which takes a state, and produces a new state from a list of state updates will work.</p>
</div>
<p>You can try the interactive demo in the following playground:</p>
<iframe src="https://codesandbox.io/embed/6y3zj?fontsize=12&hidenavigation=1" title="Counter app" style="width:1000px; height:700px; border:0; border-radius: 4px; overflow:hidden;" sandbox="allow-modals allow-forms allow-popups allow-scripts allow-same-origin"></iframe>

<p>The demo creates the same machine but with the <code>console</code> and <code>devTool</code> properties set (second parameter of the <code>createStateMachine</code> factory). These optional settings are very useful when developing a machine to trace and inspect its computation. The playground will not allow you to see the devtool, but you will be able to pass inputs to the machine <code>pwdFsm</code> and observe the logs generated in the console. To see the dev tool, you need to <a href="https://brucou.github.io/documentation/v1/tooling/devtool.html">install the devtool extension</a>, run the playground in a separate window (click on <em>open sandbox</em>), open the console (F12), and navigate to the <em>Courtesan</em> tab: you can now run commands in the console and observe the results on the dev tool.</p>
<p>Alright, let’s open the console then, run a series of inputs through the machine with the devtool on and see what we get. We logged here the results observed:</p>
<div class="fullwidth"><div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Shell command</th>
<th style="text-align:left">Devtool shows</th>
<th style="text-align:left">Machine output</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>pwdFsm()</code></td>
<td style="text-align:left">error message</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({})</code></td>
<td style="text-align:left">warning message</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({rqwe: 314})</code></td>
<td style="text-align:left">warning message</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({START:void 0})</code></td>
<td style="text-align:left">output,  machine state</td>
<td style="text-align:left">[{command:”RENDER”, params:{props: undefined, screen: “INIT_SCREEN”}}]</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({CLICKED_SUBMIT:void 0})</code></td>
<td style="text-align:left">warning message</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({CLICKED_SUBMIT:void 0})</code></td>
<td style="text-align:left">warning message</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({pwdFsm({TYPED_CHAR:&#39;a&#39;})})</code></td>
<td style="text-align:left">output,  machine state</td>
<td style="text-align:left">[{command:”RENDER”, params:{props: “a”, screen: “RED_INPUT”}}]</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({CLICKED_SUBMIT:void 0})</code></td>
<td style="text-align:left">warning message</td>
<td style="text-align:left">null</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({pwdFsm({TYPED_CHAR:&#39;a2&#39;})})</code></td>
<td style="text-align:left">output,  machine state</td>
<td style="text-align:left">[{command:”RENDER”, params:{props: “a2”, screen: “GREEN_INPUT”}}]</td>
</tr>
<tr>
<td style="text-align:left"><code>pwdFsm({CLICKED_SUBMIT:void 0})</code></td>
<td style="text-align:left">output,  machine state</td>
<td style="text-align:left">[{command:”RENDER”, params:{props: “a2”, screen: “SUBMITTED_PASSWORD”}}]</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>If you do not have the dev tool installed, here is a quick video showing the dev tool in action:<br><img src="https://imgur.com/qjqttZC.png" alt="Imgur"></p>
<p>You can already gather some of the machine semantics:</p>
<ul>
<li>if the machine receives a malformed input it returns an error object (and logs an error message in the console and the dev tool)</li>
<li>if the machine receives an input for which there are no transitions configured, it returns null (and logs a warning message in the console and the dev tool)</li>
</ul>
<h2 id="API-dive"><a href="#API-dive" class="headerlink" title="API dive"></a>API dive</h2><p>This section will go deeper into details of the <code>createStateMachine</code> API. Feel free to skip it and come back to it later if you are more interested in having a quick overview.</p>
<p>We mentioned previously that our machine is a graph whose edges are mapped to a triple of the form <code>event [condition] / actions</code>, and which is encoded in a machine definition object accepted by the <code>createStateMachine</code> factory. Let’s assume <code>fsm = createStateMachine(fsmDef)</code>, where <code>fsmDef</code> is the machine definition — an object, and <code>fsm</code> the actual executable machine — a stateful function.</p>
<p>In the machine definition, events are strings containing the name or moniker for a given event. Events can also carry data. The <code>fsm</code> will be called with inputs/events as follows: <code>fsm([eventName]: eventData)</code> and return an array of commands if any.</p>
<p>The <code>condition</code> portion of the triple corresponds in the machine definition to a predicate, called a <strong>guard</strong>, which will compute a boolean from the received event data, and the extended state of the machine. Thereafter follows the guards used in the password meter example:</p>
<pre><code class="hljs js"><span class="hljs-comment">// Guards</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPasswordStrong</span>(<span class="hljs-params">extendedState, eventData</span>) </span>&#123;
  <span class="hljs-keyword">return</span> hasLetters(eventData) &amp;&amp; hasNumbers(eventData);
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isPasswordWeak</span>(<span class="hljs-params">extendedState, eventData</span>) </span>&#123;
  <span class="hljs-keyword">return</span> !isPasswordStrong(extendedState, eventData);
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasLetters</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">return</span> str.match(<span class="hljs-regexp">/[a-z]/i</span>);
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">hasNumbers</span>(<span class="hljs-params">str</span>) </span>&#123;
  <span class="hljs-keyword">return</span> <span class="hljs-regexp">/\d/</span>.test(str);
&#125;</code></pre>
<p>The <code>actions</code> portion of the triple corresponds in the machine definition to a function (which I termed for now <em>action factory</em>) whose concern is to compute the updates to perform on the extended state of the machine, and the outputs (i.e. commands) to return to the machine caller:</p>
<pre><code class="hljs js"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayInitScreen</span>(<span class="hljs-params"></span>) </span>&#123;
  <span class="hljs-keyword">return</span> &#123;
    <span class="hljs-attr">updates</span>: NO_STATE_UPDATE,
    <span class="hljs-attr">outputs</span>: [&#123; <span class="hljs-attr">command</span>: RENDER, <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">screen</span>: INIT_SCREEN, <span class="hljs-attr">props</span>: <span class="hljs-keyword">void</span> <span class="hljs-number">0</span> &#125; &#125;]
  &#125;;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayWeakScreen</span>(<span class="hljs-params">extendedState, eventData</span>) </span>&#123;
  <span class="hljs-keyword">return</span> &#123;
    <span class="hljs-attr">updates</span>: [&#123; <span class="hljs-attr">input</span>: eventData &#125;],
    <span class="hljs-attr">outputs</span>: [
      &#123; <span class="hljs-attr">command</span>: RENDER, <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">screen</span>: RED_INPUT, <span class="hljs-attr">props</span>: eventData &#125; &#125;
    ]
  &#125;;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displayStrongScreen</span>(<span class="hljs-params">extendedState, eventData</span>) </span>&#123;
  <span class="hljs-keyword">return</span> &#123;
    <span class="hljs-attr">updates</span>: [&#123; <span class="hljs-attr">input</span>: eventData &#125;],
    <span class="hljs-attr">outputs</span>: [
      &#123; <span class="hljs-attr">command</span>: RENDER, <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">screen</span>: GREEN_INPUT, <span class="hljs-attr">props</span>: eventData &#125; &#125;
    ]
  &#125;;
&#125;

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">displaySubmittedPassword</span>(<span class="hljs-params">extendedState, eventData</span>) </span>&#123;
  <span class="hljs-keyword">const</span> password = extendedState.input;
  <span class="hljs-keyword">return</span> &#123;
    <span class="hljs-attr">updates</span>: NO_STATE_UPDATE,
    <span class="hljs-attr">outputs</span>: [
      &#123;
        <span class="hljs-attr">command</span>: RENDER,
        <span class="hljs-attr">params</span>: &#123; <span class="hljs-attr">screen</span>: SUBMITTED_PASSWORD, <span class="hljs-attr">props</span>: password &#125;
      &#125;
    ]
  &#125;;
&#125;</code></pre>
<p>As shown in the previous code:</p>
<ul>
<li><code>outputs</code> is an array of commands of the shape <code>{command:String, params:*}</code>.</li>
<li>updates is an array of state updates. The form of those state updates is that expected by the <code>updateState</code> reducer which will <em>in fine</em> perform the extended state update. Here we choose a trivial updater which simply replaces the current state with the new state:</li>
</ul>
<pre><code class="hljs js"><span class="hljs-comment">// The simplest update function possible :-)</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">updateState</span>(<span class="hljs-params">extendedState, extendedStateUpdates</span>) </span>&#123;
  <span class="hljs-keyword">return</span> extendedStateUpdates.slice(<span class="hljs-number">-1</span>)[<span class="hljs-number">0</span>];
&#125;</code></pre>

  
  
    <div class="next-links">
      
      
        <span>← <a href="/documentation/v1/tutorials/password-meter.html">Modelization</a></span>
      
      
      
        <span style="float: right;"><a href="/documentation/v1/tutorials/password-meter-ui-implementation.html">Interface implementation</a> →</span>
      
    </div>
  
  <div class="footer">
    <a id="follow-button" class="btn" title="Kingly Github" href="https://github.com/brucou/kingly">
      <img class="github" src="/documentation/images/GitHub-Mark-32px.png" alt="github">
    </a>
    <a id="follow-button" class="btn" title="Follow Kingly on Twitter" href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fbrucou.github.io/documentation%2F&amp;ref_src=twsrc%5Etfw&amp;region=follow_link&amp;screen_name=bricoi1&amp;tw_p=followbutton">
      <img class="twitter" src="/documentation/images/icons8-twitter-48.png" alt="twitter">
    </a>
  </div>
</div>

      </div>
      <script src="/documentation/js/smooth-scroll.min.js"></script>
    

    <!-- script for sidebars, version selects etc. -->
    <script src="/documentation/js/css.escape.js"></script>
    <script src="/documentation/js/common.js"></script>
    <!-- mathjax-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
