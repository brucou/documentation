

<!DOCTYPE html>
<html lang="en">
<head><meta name="generator" content="Hexo 3.8.0">
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><title>Testing the password meter — Kingly.js</title>
  <meta charset="utf-8">
  <meta name="description" content="Kingly - The Modelling Library for Portable UIs">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

  <meta property="og:type" content="article">
  <meta property="og:title" content="Testing the password meter — Kingly.js">
  <meta property="og:description" content="Kingly - The Modelling Library for Portable UIs">
  <meta property="og:image" content="https://brucou.github.io/documentation//documentation/images/kingly_logo.png">
  <!-- Twitter -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Testing the password meter — Kingly.js">
  <meta name="twitter:description" content="Kingly - The Modelling Library for Portable UIs">
  <meta name="twitter:image" content="https://brucou.github.io/documentation/images/kingly_logo.png">

  <link rel="apple-touch-icon" sizes="180x180" href="/documentation/images/icons/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192" href="/documentation/images/icons/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="256x256" href="/documentation/images/icons/favicon-256x256.png">
  <link rel="icon" href="/documentation/images/kingly_logo.png" type="image/png">

  <link href="//fonts.googleapis.com/css?family=Lato:300,400,600" rel="stylesheet" type="text/css">
  <link href="//fonts.googleapis.com/css?family=Overlock:400&text=Kingly.js" rel="stylesheet" type="text/css">

  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

  <!-- main page styles -->
  <link rel="stylesheet" href="/documentation/css/page.css">

  <!--<script src="/documentation/js/kingly.js"></script>-->

  <!-- ga -->
  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date();
      a = s.createElement(o),
        m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-141924019-1', 'brucou.github.io/documentation');
    ga('send', 'pageview');
  </script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
  </head>

  <body class="docs">    <div id="mobile-bar">
      <!-- hexo-inject:begin --><!-- hexo-inject:end --><a class="menu-button"></a>
      <a class="logo" href="/documentation"></a>
    </div>
    

<div id="header">
  <a id="logo" href="/documentation/">
    <img src="/documentation/images/kingly_logo.png" alt="library logo">
    <span>Kingly</span>
    
  </a>
  <ul id="nav">
    <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tutorials/" class="nav-link">Tutorials</a></li>
        <li><a href="/documentation/v1/examples/" class="nav-link">Examples</a></li>
        <li><a href="/documentation/v1/cookbook/" class="nav-link">Cookbook</a></li>
        <li><a href="/documentation/v1/best-practices/" class="nav-link">Best practices</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/api/index.html" class="nav-link team">API</a>
</li>
<li class="nav-dropdown-container tooling">
  <a class="nav-link">Tooling</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tooling/graph_editing.html" class="nav-link">Graph editing</a></li>
        <li><a href="/documentation/v1/tooling/compiling.html" class="nav-link">Compiling</a></li>
        <li><a href="/documentation/v1/tooling/devtool.html" class="nav-link">Devtool</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container integrations">
  <a class="nav-link">Integrations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/int-vanilla/" class="nav-link">Vanilla js</a></li>
        <li><a href="/documentation/v1/int-react/" class="nav-link">React</a></li>
        <li><a href="/documentation/v1/int-vue/" class="nav-link">Vue</a></li>
        <li><a href="/documentation/v1/int-svelte/" class="nav-link">Svelte</a></li>
        <li><a href="/documentation/v1/int-others/" class="nav-link">Others</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/testing/index.html" class="nav-link team">Testing</a>
</li>
<li>
  <a href="/documentation/v1/contributed/index.html" class="nav-link team">Contributed</a>
</li>

  </ul>
</div>

    
      <div id="main" class="fix-sidebar">
          
  <div class="sidebar">
  <div class="sidebar-inner">
    <ul class="main-menu">
      <li class="nav-dropdown-container learn">
  <a class="nav-link">Learn</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tutorials/" class="nav-link">Tutorials</a></li>
        <li><a href="/documentation/v1/examples/" class="nav-link">Examples</a></li>
        <li><a href="/documentation/v1/cookbook/" class="nav-link">Cookbook</a></li>
        <li><a href="/documentation/v1/best-practices/" class="nav-link">Best practices</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/api/index.html" class="nav-link team">API</a>
</li>
<li class="nav-dropdown-container tooling">
  <a class="nav-link">Tooling</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/tooling/graph_editing.html" class="nav-link">Graph editing</a></li>
        <li><a href="/documentation/v1/tooling/compiling.html" class="nav-link">Compiling</a></li>
        <li><a href="/documentation/v1/tooling/devtool.html" class="nav-link">Devtool</a></li>
      </ul>
    </li>
  </ul>
</li>

<li class="nav-dropdown-container integrations">
  <a class="nav-link">Integrations</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li>
      <ul>
        <li><a href="/documentation/v1/int-vanilla/" class="nav-link">Vanilla js</a></li>
        <li><a href="/documentation/v1/int-react/" class="nav-link">React</a></li>
        <li><a href="/documentation/v1/int-vue/" class="nav-link">Vue</a></li>
        <li><a href="/documentation/v1/int-svelte/" class="nav-link">Svelte</a></li>
        <li><a href="/documentation/v1/int-others/" class="nav-link">Others</a></li>
      </ul>
    </li>
  </ul>
</li>

<li>
  <a href="/documentation/v1/testing/index.html" class="nav-link team">Testing</a>
</li>
<li>
  <a href="/documentation/v1/contributed/index.html" class="nav-link team">Contributed</a>
</li>

    </ul>
    <div class="list">
      
        <h2>
          
          
          
            <select class="version-select">
              <option value="SELF" selected>1.0</option>
            </select>
          
        </h2>
        <ul class="menu-root">
  
    
    
    
    <li>
      <a href="/documentation/v1/testing/Unit-testing a Kingly machine.html" class="sidebar-link">Testing a Kingly machine</a>
    </li>
  
    
    
    
    <li>
      <a href="/documentation/v1/testing/testing command handlers.html" class="sidebar-link">Testing command handlers</a>
    </li>
  
    
    
    
    <li>
      <a href="/documentation/v1/testing/testing interfaced systems.html" class="sidebar-link">Testing interfaced systems</a>
    </li>
  
    
    
    
    <li>
      <a href="/documentation/v1/testing/testing-password-meter.html" class="sidebar-link current">Testing the password meter</a>
    </li>
  
</ul>

      
    </div>
  </div>
</div>



<div class="content old with-sidebar ">
  
    
    
  
  
    <h1>Testing the password meter</h1>
  
  
    <h2 id="Testing-the-machine"><a href="#Testing-the-machine" class="headerlink" title="Testing the machine"></a>Testing the machine</h2><p>The machine modelizing the password meter behaviour was:</p>
<p><img src="../../../../src/graphs/password%20submit%20fsm.png" alt="password submit fsm"></p>
<p>We have three events : <code>TYPED_CHAR</code> (t), <code>CLICKED_SUBMIT</code> (c), <code>START</code> (s). We are thus going to test input sequences described by the <em>regex</em> <code>[stc]*</code>. In what follows, we will also denote a letter by <code>t&#39;</code> and a number by <code>t&quot;</code>. Furthermore, a machine output will be denoted by <code>_|C</code> where <code>_</code> corresponds to the absence of commands, and <code>C</code> is an array of commands. </p>
<h3 id="Oracle"><a href="#Oracle" class="headerlink" title="Oracle"></a>Oracle</h3><p>A machine output at a given time depends on the history of machine inputs. We could write an oracle for this machine, but that would essentially be formalizing the relationship between the current output and the previous inputs, and that is exactly what we already did when modelizing the machine. The problem with doing this is that, in the general case, we end up with a task of complexity similar to modelizing the machine itself. Thus, the probably of making mistakes while writing the oracle is not that much lower to that of making mistakes when writing the machine. The oracle serves to test the machine, but we have nothing to test the oracle against. Hence when we use oracles, we have to be confident that they are correct or they must come already tested.</p>
<p>There usually are specific cases (generally corresponding to key user scenarios) for which we can easily derive the oracle: </p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Test sequence <em>regexp</em></th>
<th style="text-align:left">User scenario</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>s[t&#39;]*[t&quot;]*c</code></td>
<td style="text-align:left">User submits a strong password</td>
</tr>
<tr>
<td style="text-align:left"><code>s[t&quot;]*[t&#39;]*c</code></td>
<td style="text-align:left">User submits a strong password</td>
</tr>
<tr>
<td style="text-align:left"><code>s[t&quot;]*c</code></td>
<td style="text-align:left">User try and fails to submit a weak password</td>
</tr>
<tr>
<td style="text-align:left"><code>s[t&#39;]*c</code></td>
<td style="text-align:left">User try and fails to submit a weak password</td>
</tr>
</tbody>
</table>
</div>
<p>Additionally, we can also find edge cases for which computing the oracle is easy:</p>
<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:left">Test sequence <em>regexp</em></th>
<th style="text-align:left">Pathological case</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>ss+[t&#39;]*s+cs+</code></td>
<td style="text-align:left">The machine receives several unexpected <code>start</code> events</td>
</tr>
</tbody>
</table>
</div>
<p>User scenarios are important to generate confidence that the machine does what it should. Edge cases check the <a href="https://en.wikipedia.org/wiki/Robustness_(computer_science" target="_blank" rel="noopener">robustness</a>) of the machine i.e. its capacity to cope with unexpected or erroneous inputs.</p>
<h3 id="Properties"><a href="#Properties" class="headerlink" title="Properties"></a>Properties</h3><label for="mn-demo-4" class="margin-toggle">⊕</label><input type="checkbox" id="mn-demo-4" class="margin-toggle"><span class="marginnote"><p>Safety properties are important to check that the machine does not do what it should not.</p>
</span>
<p> We have seen that we can also use properties for our testing. What properties do we have applying to our input sequences? Important properties can be found by eliciting conditions that absolutely cannot occur (<a href="https://en.wikipedia.org/wiki/Safety_property" target="_blank" rel="noopener"><strong>safety properties</strong></a>):</p>
<ul>
<li>Any password submitted by the password meter must be strong — anything else would be a potential disaster down the road.</li>
<li>There cannot be any exception while computing machine outputs. </li>
</ul>
<label for="mn-demo-11" class="margin-toggle">⊕</label><input type="checkbox" id="mn-demo-11" class="margin-toggle"><span class="marginnote"><p>The properties listed in this section do not pretend to be exhaustive. Picking which properties to test against is a skill that develops with experience. One should select those properties that are more likely to reveal bugs.</p>
</span>
<p>Other properties correspond directly to the specifications:</p>
<ul>
<li>After any modification of the password input field, the visual feedback must be correct (green if and only if the password in the input field is strong). </li>
<li>The application only ever submits a password once. </li>
<li>The machine must return <code>_</code> to all <code>s</code> events past the first one (you can only start the password meter once).</li>
</ul>
<p>In addition to that we may want to take a few random test sequences, and check the results manually.</p>
<p><strong>TODO</strong> do some code with the generators. Also talk about how properties ideal cover a large portion of the test space. That is for the confidence part. User scenario must cover the main paths for the user.</p>
<h2 id="Testing-the-command-handlers"><a href="#Testing-the-command-handlers" class="headerlink" title="Testing the command handlers"></a>Testing the command handlers</h2><p>with vanilla js impl. we haven’t implmented th architectur separatting efects so we canno test modules separately. So we have to test integrationly or with dom-testing-library, transforming input sequenecs into DOM actions and reading DOM to observe action results.</p>
<p>With vue.js we implemented the architecture with vue-state-driven library, so just have to test the Vue<props> component! go over the props space, mock the next handler to check correct events are received. Show the default render handler. and say it is already tested. i.e. </props></p>
<p>Vue component can be tested visually or structurally with snapshots. Find a snapshot library or a logger? snapshots actually test the DOM API call (render) with the generated HTML. Or with storybook? render the component isolatedly and test the event handler<br>or <a href="https://www.chromaticqa.com/?" target="_blank" rel="noopener">https://www.chromaticqa.com/?</a> use the best tool!!</p>
<p>vanilla-js: immediate mode: imperative, and performant<br>react: retained mode: declarative</p>
<p>in tufte:</p>
<ul>
<li><a href="https://engineering.ezcater.com/the-case-against-react-snapshot-testing" target="_blank" rel="noopener">https://engineering.ezcater.com/the-case-against-react-snapshot-testing</a></li>
<li><a href="https://blog.usejournal.com/whats-wrong-with-snapshot-tests-37fbe20dfe8e" target="_blank" rel="noopener">https://blog.usejournal.com/whats-wrong-with-snapshot-tests-37fbe20dfe8e</a></li>
<li><a href="https://www.valentinog.com/blog/testing-react/" target="_blank" rel="noopener">https://www.valentinog.com/blog/testing-react/</a><br>Put it another way: consider writing a snapshot test when you’re sure the component is stabilized.<br>Also talk about TDD maybe in the introduction section</li>
</ul>
<h2 id="Testing-interfaced-systems"><a href="#Testing-interfaced-systems" class="headerlink" title="Testing interfaced systems"></a>Testing interfaced systems</h2><p>here only the DOM. No need to test the DOM, the DOM is already tested. </p>
<h2 id="What-we-learnt"><a href="#What-we-learnt" class="headerlink" title="What we learnt"></a>What we learnt</h2><p>Architecture is important for testing. process: generate sequences, apply oracle and properties, test all modules</p>
<p>But how to generate input sequences? Our simple examples, we can generate it ourselves ahead of time. In presence of concurrency we will have to use a more automatic method.</p>
<ul>
<li>for render, this means testing that the API call - for DOM the HTML render is conform to specification<ul>
<li>but also!! that events are emitted when they should, i.e. that a click on a button leads to an event sent to the machine</li>
</ul>
</li>
<li><p>there is no other command handlers</p>
</li>
<li><p>f([input]) = [outputs]</p>
</li>
<li>input (machine) is a text box content<ul>
<li>different from DOM event - talk abou the distinction</li>
</ul>
</li>
<li>user scenarios<ul>
<li>good password</li>
<li>wrong password</li>
</ul>
</li>
<li>properties of machine<ul>
<li>submitting<ul>
<li>submit in [outputs] =&gt; only one submit</li>
<li>submit in [outputs] =&gt; first submit is submittting a strong password</li>
<li>no submit in [outputs] =&gt; no submit in input</li>
</ul>
</li>
<li>feedback/meter<ul>
<li>weak input =&gt; red screen props render</li>
<li>strong input =&gt; green screen props render</li>
</ul>
</li>
</ul>
</li>
<li><p>properties of interface</p>
<ul>
<li>submitting<ul>
<li>a submitted password only if strong</li>
<li>only ever one password submitted</li>
<li>submit only through submit button</li>
</ul>
</li>
<li>feedback/meter<ul>
<li>weak input =&gt; red screen </li>
<li>strong input =&gt; green screen </li>
</ul>
</li>
</ul>
</li>
<li><p>generate input sequence of which I know the results</p>
<ul>
<li>example-based testing: generate user scenario</li>
<li>user enters weak password and see red screen</li>
<li>user enters strong password and see green screen</li>
<li>user enters strong password and click submit</li>
<li>user enters weak password and click submit<br>NOT BAD but there are other cases. Should test random value for the data.</li>
<li>do it with generators!</li>
</ul>
</li>
<li><p>generate input sequences of which I don’t know the results</p>
<ul>
<li>semi-random sequence of input and submit</li>
<li>apply properties to get a rejection</li>
<li>note the first property is that the appication does not throw! for every ui</li>
</ul>
</li>
</ul>
<p>Generating scenarios whose results we know gives some confidence. Beign able to parameterize them give more confidence as on can explore a larger set of the test space. Generating random input sequences is about looking for violation of properties and uncovers edge cases. That is the real value of it. Generally basic testing stragithen the easy paths. Issues is non-easy path, rare paths, or issue occurring after repetition and concurrency</p>
<p><a href="https://www.logigear.com/magazine/test-automation/are-test-design-techniques-useful-or-not/" target="_blank" rel="noopener">https://www.logigear.com/magazine/test-automation/are-test-design-techniques-useful-or-not/</a></p>
<p><strong>TODO</strong><br>  beware that we do not perfectly achieve the goal of testing against spec by unit testing the machine. We could change the machine to an equivalent one - would that change the test? A priori only if the event/output sequnce change sa the test f(event sequence) = output sequence. So if we change the commands then yes, but changing the commands would not that mean changing the specs?? Well talk about it anyways</p>

  
  
  <div class="footer">
    <a id="follow-button" class="btn" title="Kingly Github" href="https://github.com/brucou/kingly">
      <img class="github" src="/documentation/images/GitHub-Mark-32px.png" alt="github">
    </a>
    <a id="follow-button" class="btn" title="Follow Kingly on Twitter" href="https://twitter.com/intent/follow?original_referer=https%3A%2F%2Fbrucou.github.io/documentation%2F&amp;ref_src=twsrc%5Etfw&amp;region=follow_link&amp;screen_name=bricoi1&amp;tw_p=followbutton">
      <img class="twitter" src="/documentation/images/icons8-twitter-48.png" alt="twitter">
    </a>
  </div>
</div>

      </div>
      <script src="/documentation/js/smooth-scroll.min.js"></script>
    

    <!-- script for sidebars, version selects etc. -->
    <script src="/documentation/js/css.escape.js"></script>
    <script src="/documentation/js/common.js"></script>
    <!-- mathjax-->
    <script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.6/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->


</body>
</html>
